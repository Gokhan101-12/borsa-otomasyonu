name: Borsa Kahini

on:
  schedule:
    - cron: '30 6 * * 1'
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: KodlarÄ± Ã‡ek
        uses: actions/checkout@v4

      - name: Python 3.11 Kur
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      # BAÄžLANTI TESTÄ°: Metin olarak verdiÄŸin tokeni hatasÄ±z gÃ¶mdÃ¼m.
      - name: Telegram Manuel Test
        run: |
          curl -s -X POST "https://api.telegram.org/bot8576504804:AAF9SxTHzt40_QjeQPWxygkqMYG6yQQHdc4/sendMessage" \
          -d chat_id=1123565558 \
          -d text="ðŸš€ GÃ¶khan, sonunda oldu! Rapor birazdan geliyor."

      - name: KÃ¼tÃ¼phaneleri YÃ¼kle
        run: |
          python -m pip install --upgrade pip
          pip install pandas numpy requests yfinance --upgrade --no-cache-dir

      - name: Analizi BaÅŸlat
        env:
          # Token ve ID metin olarak burada. Hata payÄ± yok.
          TELEGRAM_TOKEN: "8576504804:AAF9SxTHzt40_QjeQPWxygkqMYG6yQQHdc4"
          TELEGRAM_CHAT_ID: "1123565558"
        run: python main.py
